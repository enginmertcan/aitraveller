const {
    GoogleGenerativeAI,
    HarmCategory,
    HarmBlockThreshold,
  } = require("@google/generative-ai");
  
  const apiKey = process.env.NEXT_PUBLIC_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 64,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location : Las Vegas, for 3 Days for Couple with a Cheap budget ,Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, Time t travel each of the location for 3 days with each day plan with best time to visit in JSON format.\n\n\n\n\n\n"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"hotelOptions\": [\n    {\n      \"hotelName\": \"The D Las Vegas\",\n      \"hotelAddress\": \"301 Fremont Street, Las Vegas, NV 89101\",\n      \"price\": \"$50 - $100 per night\",\n      \"hotelImageUrl\": \"https://www.the-d.com/media/images/hotel-exterior.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1699,\n        \"longitude\": -115.1426\n      },\n      \"rating\": 4.0,\n      \"description\": \"A budget-friendly hotel located in the heart of Fremont Street, offering a casino, restaurants, and live entertainment.\"\n    },\n    {\n      \"hotelName\": \"Golden Nugget Las Vegas\",\n      \"hotelAddress\": \"129 E Fremont St, Las Vegas, NV 89101\",\n      \"price\": \"$70 - $150 per night\",\n      \"hotelImageUrl\": \"https://www.goldennugget.com/las-vegas/media/images/header-images/golden-nugget-las-vegas-hotel-casino-exterior-view.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1696,\n        \"longitude\": -115.1419\n      },\n      \"rating\": 4.5,\n      \"description\": \"A historic hotel known for its luxurious amenities, including a casino, pool, and a shark tank.\"\n    },\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"$40 - $80 per night\",\n      \"hotelImageUrl\": \"https://www.circuscircus.com/media/images/hotel-exterior.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1034,\n        \"longitude\": -115.1723\n      },\n      \"rating\": 3.5,\n      \"description\": \"A budget-friendly hotel offering a circus theme, amusement park, and a casino.\"\n    }\n  ],\n  \"itinerary\": [\n    {\n      \"day\": \"Day 1\",\n      \"plan\": [\n        {\n          \"time\": \"9:00 AM - 12:00 PM\",\n          \"placeName\": \"Fremont Street Experience\",\n          \"placeDetails\": \"Explore the vibrant pedestrian mall with live entertainment, street performers, and a canopy of lights.\",\n          \"placeImageUrl\": \"https://www.vegasexperience.com/sites/default/files/images/freemont-street-experience-las-vegas-header-image.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1699,\n            \"longitude\": -115.1426\n          },\n          \"ticketPricing\": \"Free\",\n          \"timeToTravel\": \"1 hour\"\n        },\n        {\n          \"time\": \"12:00 PM - 2:00 PM\",\n          \"placeName\": \"Heart Attack Grill\",\n          \"placeDetails\": \"Enjoy a unique dining experience at a restaurant with a hospital theme serving calorie-laden burgers.\",\n          \"placeImageUrl\": \"https://www.heartattackgrill.com/images/heartattackgrill_vegas_logo.png\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1684,\n            \"longitude\": -115.1434\n          },\n          \"ticketPricing\": \"$10 - $20\",\n          \"timeToTravel\": \"15 minutes\"\n        },\n        {\n          \"time\": \"2:00 PM - 5:00 PM\",\n          \"placeName\": \"Neon Museum\",\n          \"placeDetails\": \"Visit a museum showcasing vintage neon signs from Las Vegas's history.\",\n          \"placeImageUrl\": \"https://www.neonmuseum.org/wp-content/uploads/2021/09/Neon-Museum-Front-Sign-09-18-21.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1707,\n            \"longitude\": -115.1505\n          },\n          \"ticketPricing\": \"$20\",\n          \"timeToTravel\": \"30 minutes\"\n        },\n        {\n          \"time\": \"5:00 PM - 7:00 PM\",\n          \"placeName\": \"The LINQ Promenade\",\n          \"placeDetails\": \"Stroll along the outdoor shopping and dining promenade with a Ferris wheel and entertainment.\",\n          \"placeImageUrl\": \"https://www.caesars.com/content/dam/caesars-entertainment/linq/images/hotel-experience-images/linq-promenade-at-night-1.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1014,\n            \"longitude\": -115.1709\n          },\n          \"ticketPricing\": \"Free\",\n          \"timeToTravel\": \"15 minutes\"\n        },\n        {\n          \"time\": \"7:00 PM - 9:00 PM\",\n          \"placeName\": \"Dinner at a Buffet\",\n          \"placeDetails\": \"Enjoy a cheap and filling dinner at one of the many affordable buffets in Las Vegas.\",\n          \"placeImageUrl\": \"https://www.caesars.com/content/dam/caesars-entertainment/paris-las-vegas/images/hotel-experience-images/paris-buffet-header.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1005,\n            \"longitude\": -115.1717\n          },\n          \"ticketPricing\": \"$20 - $30\",\n          \"timeToTravel\": \"15 minutes\"\n        }\n      ]\n    },\n    {\n      \"day\": \"Day 2\",\n      \"plan\": [\n        {\n          \"time\": \"9:00 AM - 12:00 PM\",\n          \"placeName\": \"Bellagio Conservatory & Botanical Garden\",\n          \"placeDetails\": \"Admire the beautiful floral displays and seasonal themes in the conservatory.\",\n          \"placeImageUrl\": \"https://www.bellagio.com/content/dam/bellagio/images/experience/conservatory-botanical-garden/conservatory-botanical-garden-11.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1138,\n            \"longitude\": -115.1738\n          },\n          \"ticketPricing\": \"Free\",\n          \"timeToTravel\": \"30 minutes\"\n        },\n        {\n          \"time\": \"12:00 PM - 2:00 PM\",\n          \"placeName\": \"Fountains of Bellagio\",\n          \"placeDetails\": \"Watch the synchronized water and light show choreographed to music.\",\n          \"placeImageUrl\": \"https://www.bellagio.com/content/dam/bellagio/images/experience/fountains-of-bellagio/fountains-of-bellagio-10.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1141,\n            \"longitude\": -115.1736\n          },\n          \"ticketPricing\": \"Free\",\n          \"timeToTravel\": \"1 hour\"\n        },\n        {\n          \"time\": \"2:00 PM - 5:00 PM\",\n          \"placeName\": \"The Strip\",\n          \"placeDetails\": \"Walk or take a bus along the Las Vegas Strip, exploring the iconic hotels and casinos.\",\n          \"placeImageUrl\": \"https://www.visitlasvegas.com/sites/default/files/styles/landscape_lg/public/images/hero-images/strip-las-vegas-night.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1053,\n            \"longitude\": -115.1705\n          },\n          \"ticketPricing\": \"Free\",\n          \"timeToTravel\": \"2 hours\"\n        },\n        {\n          \"time\": \"5:00 PM - 7:00 PM\",\n          \"placeName\": \"High Roller Observation Wheel\",\n          \"placeDetails\": \"Enjoy panoramic views of Las Vegas from the world's tallest observation wheel.\",\n          \"placeImageUrl\": \"https://www.caesars.com/content/dam/caesars-entertainment/linq/images/hotel-experience-images/high-roller-at-night.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1014,\n            \"longitude\": -115.1709\n          },\n          \"ticketPricing\": \"$30 - $40\",\n          \"timeToTravel\": \"1 hour\"\n        },\n        {\n          \"time\": \"7:00 PM - 9:00 PM\",\n          \"placeName\": \"Dinner at a Food Court\",\n          \"placeDetails\": \"Find affordable and diverse food options at a food court in a casino.\",\n          \"placeImageUrl\": \"https://www.caesars.com/content/dam/caesars-entertainment/linq/images/hotel-experience-images/linq-promenade-food-court-1.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1014,\n            \"longitude\": -115.1709\n          },\n          \"ticketPricing\": \"$10 - $15\",\n          \"timeToTravel\": \"15 minutes\"\n        }\n      ]\n    },\n    {\n      \"day\": \"Day 3\",\n      \"plan\": [\n        {\n          \"time\": \"9:00 AM - 12:00 PM\",\n          \"placeName\": \"Red Rock Canyon National Conservation Area\",\n          \"placeDetails\": \"Explore the scenic desert landscapes with hiking trails, rock formations, and panoramic views.\",\n          \"placeImageUrl\": \"https://www.nps.gov/redr/planyourvisit/images/red-rock-canyon-hiking-trails-jpg-red-rock-canyon-national-conservation-area-nps-gov.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1943,\n            \"longitude\": -115.2427\n          },\n          \"ticketPricing\": \"$15\",\n          \"timeToTravel\": \"1 hour\"\n        },\n        {\n          \"time\": \"12:00 PM - 2:00 PM\",\n          \"placeName\": \"Lunch at a Local Diner\",\n          \"placeDetails\": \"Enjoy a classic American lunch at an affordable diner near the Strip.\",\n          \"placeImageUrl\": \"https://www.visitlasvegas.com/sites/default/files/styles/landscape_lg/public/images/hero-images/strip-las-vegas-night.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1053,\n            \"longitude\": -115.1705\n          },\n          \"ticketPricing\": \"$10 - $15\",\n          \"timeToTravel\": \"30 minutes\"\n        },\n        {\n          \"time\": \"2:00 PM - 5:00 PM\",\n          \"placeName\": \"Hoover Dam\",\n          \"placeDetails\": \"Take a day trip to see the iconic Hoover Dam and learn about its history and engineering marvels.\",\n          \"placeImageUrl\": \"https://www.nps.gov/hove/planyourvisit/images/hooverdam-0517.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0001,\n            \"longitude\": -114.9774\n          },\n          \"ticketPricing\": \"$30\",\n          \"timeToTravel\": \"1.5 hours\"\n        },\n        {\n          \"time\": \"5:00 PM - 7:00 PM\",\n          \"placeName\": \"Dinner at a Casual Restaurant\",\n          \"placeDetails\": \"Find a casual and affordable restaurant near your hotel for a final dinner in Las Vegas.\",\n          \"placeImageUrl\": \"https://www.visitlasvegas.com/sites/default/files/styles/landscape_lg/public/images/hero-images/strip-las-vegas-night.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1053,\n            \"longitude\": -115.1705\n          },\n          \"ticketPricing\": \"$15 - $25\",\n          \"timeToTravel\": \"15 minutes\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Explanation:**\n\n* **hotelOptions**: This section provides a list of budget-friendly hotels in Las Vegas with relevant information like name, address, price range, image URL, coordinates, rating, and a brief description.\n* **itinerary**: This section outlines a 3-day itinerary for a couple visiting Las Vegas on a budget. \n    * **day**: Each day is broken down with a plan for the activities.\n    * **plan**: Each plan includes a series of activities with:\n        * **time**: The suggested time slot for the activity.\n        * **placeName**: The name of the attraction or location.\n        * **placeDetails**: A short description of the place.\n        * **placeImageUrl**: A URL to an image of the place.\n        * **geoCoordinates**: Latitude and longitude coordinates of the location.\n        * **ticketPricing**: The approximate cost of tickets or entry fees.\n        * **timeToTravel**: Estimated travel time to the location.\n\n**Key Points for a Cheap Budget:**\n\n* **Accommodation**: Choose budget-friendly hotels in downtown Las Vegas or on the Strip but further away from the most expensive resorts.\n* **Food**: Utilize food courts, buffets (for a more filling experience), and local diners for affordable meals.\n* **Activities**: Prioritize free attractions like Fremont Street Experience, The LINQ Promenade, Bellagio Conservatory & Botanical Garden, and walking along The Strip.\n* **Transportation**: Utilize public transportation or walking for most of your travel. \n* **Consider Discount Tickets**: Websites like Groupon or Travelzoo often offer deals on attractions and shows.\n* **Plan Ahead**: Pre-book any necessary tickets or reservations to save money.\n\n**Note:** Prices and availability may vary, so it's always best to check online for the most up-to-date information.\n"},
          ],
        },
      ],
    });
  
